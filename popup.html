<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Mood Buddy</title>
    <link rel="stylesheet" href="popup.css" />
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <img src="icons/icon48.png" alt="Mood Buddy Logo">
                <h1>Mood Buddy</h1>
            </div>
            <nav class="tabs">
                <button class="tab-link active" data-tab="log">Log</button>
                <button class="tab-link" data-tab="history">History</button>
                <button class="tab-link" data-tab="settings">Settings</button>
            </nav>
        </header>

        <!-- Tab 1: Log Mood -->
        <div id="log" class="tab-content active">
            <p class="prompt">How are you feeling right now?</p>
            <div class="emoji-grid">
                <button class="emoji" data-emoji="😄">😄</button>
                <button class="emoji" data-emoji="🙂">🙂</button>
                <button class="emoji" data-emoji="😐">😐</button>
                <button class="emoji" data-emoji="😔">😔</button>
                <button class="emoji" data-emoji="😡">😡</button>
                <button class="emoji" data-emoji="😴">😴</button>
                <button class="emoji" data-emoji="😍">😍</button>
                <button class="emoji" data-emoji="😰">😰</button>
            </div>
            <textarea id="moodText" placeholder="A few words about your feeling... (optional)" rows="3"></textarea>
            <input type="text" id="actionText" placeholder="A small action I can take... (optional)" />
            <button id="saveBtn" class="button-primary">Save Mood</button>
            <div id="status" class="status-message"></div>
        </div>

        <!-- Tab 2: History -->
        <div id="history" class="tab-content">
            <div class="history-controls">
                <button id="exportBtn" class="button-secondary">Export CSV</button>
                <button id="clearBtn" class="button-danger">Clear History</button>
            </div>
            <div id="stats" class="history-stats"></div>
            <ul id="historyList" class="history-list"></ul>
        </div>

        <!-- Tab 3: Settings -->
        <div id="settings" class="tab-content">
            <div class="setting-row">
                <label for="enableNotifications">Enable Reminders</label>
                <label class="switch">
                    <input type="checkbox" id="enableNotifications">
                    <span class="slider round"></span>
                </label>
            </div>

            <div id="advanced-settings">
                <div class="setting-row">
                    <label for="reminderIntervalInMinutes">Remind me every</label>
                    <select id="reminderIntervalInMinutes">
                        <option value="15">Every 15 minutes</option>
                        <option value="30">Every 30 minutes</option>
                        <option value="45">Every 45 minutes</option>
                        <option value="60">Every 1 hour</option>
                        <option value="120">Every 2 hours</option>
                        <option value="240">Every 4 hours</option>
                        <option value="480">Every 8 hours</option>
                    </select>
                </div>
                <div class="setting-row">
                    <label>Active Days</label>
                    <div class="day-selector">
                        <button class="day-toggle" data-day="1">M</button>
                        <button class="day-toggle" data-day="2">T</button>
                        <button class="day-toggle" data-day="3">W</button>
                        <button class="day-toggle" data-day="4">T</button>
                        <button class="day-toggle" data-day="5">F</button>
                        <button class="day-toggle" data-day="6">S</button>
                        <button class="day-toggle" data-day="0">S</button>
                    </div>
                </div>
                <div class="setting-row">
                    <label>Active Time Range</label>
                    <div class="time-range">
                        <input type="time" id="startTime">
                        <span>-</span>
                        <input type="time" id="endTime">
                    </div>
                </div>
            </div>
            <button id="saveSettingsBtn" class="button-primary">Save Settings</button>
            <div id="settingsStatus" class="status-message"></div>
        </div>
    </div>

    <!-- Modal for Clear ALL Confirmation -->
    <div id="confirmClearModal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h3>Are you sure?</h3>
            <p>This will permanently delete all your mood history. This cannot be undone.</p>
            <div class="modal-actions">
                <button class="button-secondary" data-action="close">Cancel</button>
                <button class="button-danger" data-action="confirm">Yes, Clear All</button>
            </div>
        </div>
    </div>
    
    <!-- NEW Modal for Single DELETE Confirmation -->
    <div id="confirmDeleteModal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h3>Delete this entry?</h3>
            <p>This will permanently delete this mood entry. This cannot be undone.</p>
            <div class="modal-actions">
                <button class="button-secondary" data-action="close">Cancel</button>
                <button class="button-danger" data-action="confirm">Yes, Delete</button>
            </div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>

